# PRD: 时间选择功能 (Time Picker)

> 版本: 1.0  
> 日期: 2026-02-09  
> 状态: MVP 开发中

## 1. 功能概述

### 1.1 背景
在招聘场景中，招聘人员经常发送多个面试时间选项给候选人，但候选人通常只回复 "ok" 或 "works for me"，而不明确选择哪个具体时间。这导致招聘人员需要再次确认，造成沟通效率低下。

### 1.2 解决方案
新增"时间选择"模式，允许用户创建包含多个候选时间段的链接。收到链接的人**必须**点选其中一个时间才能确认，从而强制明确的时间选择，消除模糊回复。

### 1.3 核心价值
- **强制选择**: 消除 "ok" 式的模糊回复
- **减少来回**: 一次链接，一次选择，搞定
- **无服务器**: 保持 LinkCal 的隐私优先架构，所有数据在 URL 中
- **即开即用**: 无需注册，无需安装

## 2. 用户故事

### 2.1 创建者（招聘人员）
```
作为招聘人员，
我希望能够发送一个包含多个面试时间的链接，
让候选人必须选择其中一个时间，
这样我就不需要反复确认具体时间。
```

### 2.2 接收者（候选人）
```
作为候选人，
当我收到面试时间链接时，
我希望能看到所有可选时间，
选择最合适的一个，并添加到我的日历。
```

## 3. 核心流程

### 3.1 创建流程
```
┌─────────────────────────────────────────────────────────────┐
│ 1. 用户点击 "Create Time Picker" 按钮                        │
│    ↓                                                        │
│ 2. 输入事件标题（如 "面试 - John Smith"）                    │
│    ↓                                                        │
│ 3. 添加多个时间选项（至少2个）                               │
│    - 每个选项：日期 + 开始时间 + 时长                        │
│    ↓                                                        │
│ 4. 可选：添加地点/描述                                       │
│    ↓                                                        │
│ 5. 生成分享链接                                             │
│    ↓                                                        │
│ 6. 复制链接，发送给候选人                                    │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 选择流程
```
┌─────────────────────────────────────────────────────────────┐
│ 1. 候选人打开链接                                           │
│    ↓                                                        │
│ 2. 看到事件标题和所有时间选项                                │
│    ↓                                                        │
│ 3. 点选一个时间（单选）                                      │
│    ↓                                                        │
│ 4. 点击 "Confirm Selection" 按钮                            │
│    ↓                                                        │
│ 5. 显示确认页面：                                           │
│    - 已选时间详情                                           │
│    - 添加到 Google Calendar / Outlook / Apple Calendar      │
│    - 下载 .ics 文件                                         │
│    ↓                                                        │
│ 6. （可选）复制确认链接分享给创建者                          │
└─────────────────────────────────────────────────────────────┘
```

## 4. UI/UX 设计要点

### 4.1 创建页面
- **模式切换**: 在首页添加模式切换（Calendar / Time Picker）
- **时间选项卡片**: 每个时间选项显示为可移除的卡片
- **快捷添加**: 支持快速添加常见时段（+30min, +1hr）
- **最少2个**: 至少需要2个时间选项才能生成链接

### 4.2 选择页面
- **清晰展示**: 所有时间选项以单选卡片形式展示
- **高亮选中**: 选中的时间有明显的视觉区分
- **时区提示**: 显示时区信息，避免跨时区混淆
- **强制选择**: Confirm 按钮在未选择时禁用

### 4.3 确认页面
- **成功动效**: 确认后显示成功动画
- **一键添加**: 突出显示添加到日历的按钮
- **分享选项**: 可选复制确认链接

## 5. 技术方案

### 5.1 URL 编码格式
```
URL 结构: linkcal.link/pick#<encoded_data>

encoded_data 格式（LZ-String 压缩后的 JSON）:
{
  "v": 2,                           // schema version
  "mode": "pick",                   // 模式标识
  "title": "Interview - John",      // 事件标题
  "desc": "...",                    // 描述（可选）
  "loc": "Zoom meeting",            // 地点（可选）
  "tz": "America/New_York",         // 创建者时区
  "dur": 60,                        // 时长（分钟）
  "opts": [                         // 时间选项数组
    "2026-02-10T09:00",
    "2026-02-10T14:00",
    "2026-02-11T10:00"
  ],
  "pro": {                          // Pro 功能（可选）
    "expires": 1707523200000,
    "hideBranding": true
  }
}
```

### 5.2 确认后 URL
```
URL 结构: linkcal.link/pick#<encoded_data>&sel=<index>

sel 参数: 选中的时间选项索引（0-based）
```

### 5.3 新增组件
```
src/
├── pages/
│   └── TimePicker.tsx           # 时间选择页面（创建+查看）
│   └── Recruiters.tsx           # 招聘人员 Landing Page
├── components/
│   ├── TimePickerForm.tsx       # 创建表单
│   ├── TimeOptionCard.tsx       # 时间选项卡片
│   ├── TimePickerView.tsx       # 选择界面
│   └── ConfirmationView.tsx     # 确认页面
├── types/
│   └── index.ts                 # 添加 TimePicker 类型
└── utils/
    └── url.ts                   # 添加 pick 模式编解码
```

### 5.4 路由设计
```
/           → 首页（现有 Calendar 模式）
/pick       → Time Picker 模式
/pick#xxx   → 查看/选择时间
/recruiters → 招聘场景 Landing Page
```

## 6. 数据结构

### 6.1 TypeScript 类型
```typescript
interface TimePickerData {
  v: number;              // schema version
  mode: 'pick';           // 模式标识
  title: string;          // 事件标题
  desc?: string;          // 描述
  loc?: string;           // 地点
  tz: string;             // 创建者时区
  dur: number;            // 时长（分钟）
  opts: string[];         // ISO 时间字符串数组
  pro?: {
    expires?: number;
    hideBranding?: boolean;
  };
}

interface TimePickerSelection {
  data: TimePickerData;
  selectedIndex: number;
}
```

## 7. MVP 范围

### 7.1 包含功能 ✅
- [x] 创建时间选择器（标题 + 多个时间选项）
- [x] 设置时长（默认60分钟，可选30/60/90/120分钟）
- [x] 添加地点和描述
- [x] 生成分享链接
- [x] 查看所有时间选项
- [x] 选择一个时间
- [x] 确认页面 + 添加到日历
- [x] 下载 .ics 文件
- [x] Pro 功能（密码保护、链接过期、隐藏品牌）
- [x] 招聘场景 Landing Page

### 7.2 未来迭代 🔮
- [ ] 多人投票模式（类似 Doodle）
- [ ] 选择后邮件通知创建者
- [ ] 与日历 API 集成检查冲突
- [ ] 自定义品牌颜色
- [ ] 批量创建（导入 CSV）

## 8. 成功指标

### 8.1 核心指标
- **链接创建数**: Time Picker 链接的创建量
- **选择完成率**: 打开链接后完成选择的比例
- **添加到日历率**: 选择后添加到日历的比例

### 8.2 用户反馈
- Reddit/Twitter 招聘社区的反馈
- 用户支持请求中关于此功能的提及

## 9. 时间线

| 阶段 | 内容 | 时间 |
|------|------|------|
| PRD | 需求文档 | Day 1 |
| 开发 | 功能实现 | Day 1-2 |
| Landing | 落地页 | Day 2 |
| 测试 | dev 环境测试 | Day 2 |
| 发布 | 合并到 main | Day 3 |

---

*此 PRD 遵循 LinkCal 的核心原则：简单、隐私、无服务器。*
